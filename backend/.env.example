# =====================================================
# AGENDA VIRTUAL ATA - VARIABLES DE ENTORNO
# Backend (Cloudflare Workers)
# =====================================================

# ===== ENTORNO =====
ENVIRONMENT=development

# ===== SUPABASE =====
# URL de tu proyecto Supabase
# Formato: https://xxxxxxxxxxxxx.supabase.co
SUPABASE_URL=https://tu-proyecto.supabase.co

# Supabase Anon Key (API pública)
# Se usa para operaciones con RLS habilitado
SUPABASE_ANON_KEY=tu_supabase_anon_key_aqui

# Supabase Service Key (API privada - NUNCA EXPONER EN CLIENTE)
# Se usa para operaciones administrativas sin RLS
SUPABASE_SERVICE_KEY=tu_supabase_service_key_aqui

# ===== JWT =====
# Secreto para firmar tokens JWT
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=tu_jwt_secret_seguro_aqui_32_caracteres_minimo

# Expiración del token (en segundos o string)
# Ejemplos: 3600 (1 hora), '1d' (1 día), '7d' (7 días)
JWT_EXPIRES_IN=1d

# ===== CORS =====
# Orígenes permitidos (separados por coma)
CORS_ORIGINS=http://localhost:5173,https://agenda-virtual-ata.pages.dev

# ===== CLOUDFLARE =====
# Account ID de Cloudflare
CLOUDFLARE_ACCOUNT_ID=tu_account_id

# ===== NOTIFICACIONES (VAPID) =====
# VAPID Public Key para Web Push API
# Generar con: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=tu_vapid_public_key

# VAPID Private Key
VAPID_PRIVATE_KEY=tu_vapid_private_key

# Email de contacto para VAPID
VAPID_SUBJECT=mailto:contacto@ata.edu.pe

# ===== STORAGE =====
# Bucket de Supabase Storage para evidencias
STORAGE_BUCKET=evidencias

# Tamaño máximo de archivo (en bytes)
# 5MB = 5242880
MAX_FILE_SIZE=5242880

# ===== SEGURIDAD =====
# Intentos máximos de login antes de bloqueo
MAX_LOGIN_ATTEMPTS=5

# Tiempo de bloqueo (en minutos)
LOGIN_BLOCK_TIME=15

# ===== RATE LIMITING =====
# Requests por minuto por IP
RATE_LIMIT_PER_MINUTE=100

# ===== LOGS =====
# Nivel de logs: debug, info, warn, error
LOG_LEVEL=info

# ===== FEATURES FLAGS =====
# Habilitar/deshabilitar características
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_PUSH_NOTIFICATIONS=true

# =====================================================
# INSTRUCCIONES DE USO
# =====================================================

# 1. DESARROLLO LOCAL:
#    - Copiar este archivo como .env
#    - Completar con tus credenciales de Supabase
#    - No commitear el archivo .env (está en .gitignore)

# 2. CLOUDFLARE WORKERS (PRODUCCIÓN):
#    - No usar archivo .env
#    - Configurar secrets con wrangler:
#      wrangler secret put SUPABASE_URL
#      wrangler secret put SUPABASE_ANON_KEY
#      wrangler secret put SUPABASE_SERVICE_KEY
#      wrangler secret put JWT_SECRET
#      wrangler secret put VAPID_PRIVATE_KEY

# 3. OBTENER CREDENCIALES SUPABASE:
#    - SUPABASE_URL: Project Settings → API → Project URL
#    - SUPABASE_ANON_KEY: Project Settings → API → Project API keys → anon public
#    - SUPABASE_SERVICE_KEY: Project Settings → API → Project API keys → service_role

# 4. GENERAR JWT_SECRET:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# 5. GENERAR VAPID KEYS:
#    npx web-push generate-vapid-keys

# =====================================================
